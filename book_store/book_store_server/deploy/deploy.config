#!/bin/bash

# 华为云配置
HUAWEI_REGISTRY="swr.cn-north-4.myhuaweicloud.com"
HUAWEI_REGION="cn-north-4"

# Portainer配置
PORTAINER_HOST="116.205.108.41"
PORTAINER_PORT="9000"
PORTAINER_ENDPOINT_ID=1

# 项目配置
PROJECT_NAME="book_store"
BASE_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

# 部署配置
DEPLOY_TIMEOUT=300  # 部署超时时间（秒）
HEALTH_CHECK_INTERVAL=5  # 健康检查间隔（秒）
MAX_RETRY_ATTEMPTS=3  # 最大重试次数

# 端口配置
REQUIRED_PORTS=(
    8080  # API服务
    8081  # Insights服务
    8082  # Web服务
    5432  # PostgreSQL
    6379  # Redis
)

# 日志配置
LOG_DIR="${BASE_DIR}/logs"
DEPLOY_LOG="${LOG_DIR}/deploy.log"

# 备份配置
BACKUP_DIR="${BASE_DIR}/backups"
KEEP_BACKUP_DAYS=7

# 镜像配置
KEEP_IMAGES=3  # 保留最新的3个版本的镜像

# 通知配置
NOTIFICATION_URL=""  # 可以配置企业微信或钉钉等通知地址

# 数据库配置
DB_BACKUP_ENABLED=true
DB_BACKUP_COMPRESS=true

# 监控配置
HEALTH_CHECK_ENDPOINTS=(
    "http://localhost:8080/health"
    "http://localhost:8081/metrics"
) 